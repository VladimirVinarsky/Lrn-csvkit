<h1 id="adjust-csv-data-and-insert-into-a-text-document">Adjust csv data and insert into a text document</h1>
<h2 id="insert-a-table">Insert a table</h2>
<p>Insert a table from “stacked.csv” into document in vim:<br />
<code>.r ! csvlook stacked.csv</code></p>
<table>
<thead>
<tr class="header">
<th>group</th>
<th>peakNo</th>
<th>min</th>
<th>max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data1-test.csv</td>
<td>1</td>
<td>2</td>
<td>20</td>
</tr>
<tr class="even">
<td>data1-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>1</td>
<td>3</td>
<td>205</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data3-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data3-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data3-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
</tbody>
</table>
<h2 id="insert-only-selected-columns-of-table">Insert only selected columns of table</h2>
<p>To insert only “group” and “peakNo” columns.</p>
<p><code>.r ! csvcut -c group,peakNo | csvlook</code></p>
<table>
<thead>
<tr class="header">
<th>group</th>
<th>peakNo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data1-test.csv</td>
<td>1</td>
</tr>
<tr class="even">
<td>data1-test.csv</td>
<td>2</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>1</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>2</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>3</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>4</td>
</tr>
<tr class="odd">
<td>data3-test.csv</td>
<td>2</td>
</tr>
<tr class="even">
<td>data3-test.csv</td>
<td>3</td>
</tr>
<tr class="odd">
<td>data3-test.csv</td>
<td>4</td>
</tr>
</tbody>
</table>
<h2 id="insert-table-sorted-by-one-or-multiple-columns">Insert table sorted by one or multiple columns</h2>
<p>To insert a table sorted by two columns (max and peakNo):<br />
<code>.r ! csvsort -c max,peakNo stacked.csv | csvlook</code></p>
<table>
<thead>
<tr class="header">
<th>group</th>
<th>peakNo</th>
<th>min</th>
<th>max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data1-test.csv</td>
<td>1</td>
<td>2</td>
<td>20</td>
</tr>
<tr class="even">
<td>data1-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data3-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data3-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data3-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>1</td>
<td>3</td>
<td>205</td>
</tr>
</tbody>
</table>
<p>-r flag: revert the sorting to descending</p>
<h2 id="insert-table-filtered-by-word-in-given-column">Insert table filtered by word in given column</h2>
<p>To select only rows containing “data2” use -m flag:<br />
<code>.r ! csvgrep -c group -m data2 stacked.csv | csvlook</code></p>
<table>
<thead>
<tr class="header">
<th>group</th>
<th>peakNo</th>
<th>min</th>
<th>max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data2-test.csv</td>
<td>1</td>
<td>3</td>
<td>205</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
</tbody>
</table>
<p>-i flag: to revert from select matching to return not matching</p>
<h2 id="insert-table-filtered-by-regular-expression-in-given-column">Insert table filtered by regular expression in given column</h2>
<p>To filter rows which in group column contain “ta2” or “ta3” use -r flag:<br />
<code>.r ! csvgrep -c group -r "ta2|ta3" stacked.csv | csvlook</code></p>
<table>
<thead>
<tr class="header">
<th>group</th>
<th>peakNo</th>
<th>min</th>
<th>max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data2-test.csv</td>
<td>1</td>
<td>3</td>
<td>205</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data3-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data3-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data3-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
</tbody>
</table>
<p>-i flag: to revert from select matching to return not matching</p>
<h2 id="filter-table-rows-by-matching-list-contained-in-a-file">Filter table rows by matching list contained in a file</h2>
<h3 id="cell-in-csv-is-matched-exactly-by-line">Cell in csv is matched exactly by line</h3>
<p>To filter by file “filter-file” which contains 2 lines: data3-test.csv and data1-test.csv.<br />
</p>
<p><strong>Print the lines containing what is in the file</strong><br />
</p>
<p><code>.r ! csvgrep -c group -f filter-file stacked.csv | csvlook</code></p>
<table>
<thead>
<tr class="header">
<th>group</th>
<th>peakNo</th>
<th>min</th>
<th>max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data1-test.csv</td>
<td>1</td>
<td>2</td>
<td>20</td>
</tr>
<tr class="even">
<td>data1-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data3-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data3-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data3-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
</tbody>
</table>
<p><strong>print lines not containing what is in the file</strong><br />
<code>.r ! csvgrep -c group -if filter-file stacked.csv | csvlook</code></p>
<table>
<thead>
<tr class="header">
<th>group</th>
<th>peakNo</th>
<th>min</th>
<th>max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data2-test.csv</td>
<td>1</td>
<td>3</td>
<td>205</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
</tbody>
</table>
<h3 id="cell-in-csv-contains-string-found-in-file">Cell in csv contains string found in file</h3>
<p>To filter by file which contains two lines: data3 and data1<br />
<code>.r ! cat stacked.csv | grep -Fvwf filter-file | csvlook</code></p>
<p>grep flags:<br />
-f: take from file<br />
-F: as fixed strings<br />
-W: only lines with whole words matches<br />
-v: select non matching lines (filtering)<br />
</p>
<table>
<thead>
<tr class="header">
<th>group</th>
<th>peakNo</th>
<th>min</th>
<th>max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data2-test.csv</td>
<td>1</td>
<td>3</td>
<td>205</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>2</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="odd">
<td>data2-test.csv</td>
<td>3</td>
<td>13</td>
<td>34</td>
</tr>
<tr class="even">
<td>data2-test.csv</td>
<td>4</td>
<td>13</td>
<td>34</td>
</tr>
</tbody>
</table>
